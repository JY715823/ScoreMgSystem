<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>系统首页</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../component/pear/css/pear.css" />
    <link rel="stylesheet" href="../../admin/css/other/console.css" />
    <style>
        .welcome-card {
            background: linear-gradient(to right, #1E9FFF, #009688);
            color: #fff;
            padding: 30px;
            border-radius: 4px;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .welcome-title { font-size: 24px; font-weight: 500; margin-bottom: 10px; }
        .welcome-date { font-size: 14px; opacity: 0.8; }

        .data-card {
            background: #fff;
            padding: 25px;
            border-radius: 4px;
            box-shadow: 0 1px 2px 0 rgba(0,0,0,.05);
            text-align: center;
            transition: all 0.3s;
        }
        .data-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .data-num { font-size: 32px; font-weight: bold; color: #333; margin: 10px 0; }
        .data-label { color: #888; font-size: 14px; }
        .data-icon { font-size: 40px; margin-bottom: 10px; display: inline-block; }

        .guide-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 14px;
        }
        .guide-item {
            background: #fafafa;
            border: 1px solid #f0f0f0;
            padding: 14px;
            border-radius: 6px;
            display: flex;
            align-items: flex-start;
        }
        .guide-item i {
            font-size: 22px;
            color: #009688;
            margin-right: 12px;
            margin-top: 3px;
        }
        .guide-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }
        .guide-desc {
            color: #666;
            line-height: 22px;
        }
        .quick-link-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .quick-link {
            padding: 12px 14px;
            border-radius: 6px;
            border: 1px solid #f0f0f0;
            background: linear-gradient(135deg, #f8f9ff, #f3fffb);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all .2s;
        }
        .quick-link:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
            transform: translateY(-2px);
        }
        .quick-link .label {
            font-weight: 600;
            color: #333;
        }
        .quick-link .desc {
            color: #888;
            font-size: 13px;
        }
    </style>
</head>
<body class="pear-container">

<div class="layui-row layui-col-space15">
    <div class="layui-col-md12">
        <div class="welcome-card">
            <div class="welcome-title">欢迎回来，<span id="user-name">加载中...</span></div>
            <div class="welcome-date" id="current-date">正在获取时间...</div>
        </div>
    </div>
</div>

<div class="layui-row layui-col-space15">
    <div class="layui-col-md4">
        <div class="data-card">
            <i class="layui-icon layui-icon-user data-icon" style="color: #1E9FFF;"></i>
            <div class="data-num" id="stat-student">0</div>
            <div class="data-label">学生总数 (人)</div>
        </div>
    </div>
    <div class="layui-col-md4">
        <div class="data-card">
            <i class="layui-icon layui-icon-read data-icon" style="color: #FFB800;"></i>
            <div class="data-num" id="stat-course">0</div>
            <div class="data-label">课程总数 (门)</div>
        </div>
    </div>
    <div class="layui-col-md4">
        <div class="data-card">
            <i class="layui-icon layui-icon-chart-screen data-icon" style="color: #FF5722;"></i>
            <div class="data-num" id="stat-gpa">0.00</div>
            <div class="data-label">全校平均绩点</div>
        </div>
    </div>
</div>

<div class="layui-row layui-col-space15">
    <div class="layui-col-md8">
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="layui-icon layui-icon-template-1"></i> 使用说明
            </div>
            <div class="layui-card-body">
                <div class="guide-list">
                    <div class="guide-item">
                        <i class="layui-icon layui-icon-set"></i>
                        <div>
                            <div class="guide-title">管理员使用</div>
                            <div class="guide-desc">在“学生管理”维护基础档案，在“课程管理”新增或调整课程，在“成绩管理”完成成绩录入与审核。</div>
                        </div>
                    </div>
                    <div class="guide-item">
                        <i class="layui-icon layui-icon-user"></i>
                        <div>
                            <div class="guide-title">学生端</div>
                            <div class="guide-desc">在“我的成绩”查看个人分数及绩点分析，点击单科可查看详细评语。默认绩点计算公式：(分数-50)/10，不及格为0。</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="../../component/layui/layui.js"></script>
<script src="../../component/pear/pear.js"></script>
<script>
    layui.use(['jquery','layer'], function() {
        var $ = layui.jquery;
        var layer = layui.layer;

        // 1. 设置当前日期
        var now = new Date();
        var dateStr = now.getFullYear() + "年" + (now.getMonth() + 1) + "月" + now.getDate() + "日";
        $("#current-date").text("今天是 " + dateStr + "，祝您生活愉快！");

        // 2. 异步请求后端数据
        $.ajax({
            url: "/api/home/data",
            method: "GET",
            dataType: "json",
            success: function(res) {
                if(res.code === 0 && res.data) {
                    var d = res.data;

                    // 填充用户名
                    $("#user-name").text(d.username);

                    // 填充统计数据 (带简单的数字跳动效果可选，这里直接显示)
                    $("#stat-student").text(d.studentCount);
                    $("#stat-course").text(d.courseCount);
                    $("#stat-gpa").text(d.schoolGpa);
                }
            },
            error: function() {
                $("#user-name").text("获取失败");
            }
        });
    });
</script>
</body>
</html>
